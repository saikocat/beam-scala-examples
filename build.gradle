plugins {
    id 'scala'
    id 'com.github.johnrengelman.shadow' version "$shadowVersion"
    id "com.diffplug.gradle.spotless" version "$spotlessVersion"
}

apply from: 'gradle/scalametalbloop.gradle'

sourceCompatibility = 1.8
targetCompatibility = 1.8

dependencies {
    compile group: 'org.scala-lang', name: 'scala-library', version: scalaVersion

    compileOnly group: "org.apache.beam", name: "beam-runners-google-cloud-dataflow-java", version: beamVersion
    compileOnly group: "org.apache.beam", name: "beam-runners-direct-java", version: beamVersion
}

shadowJar {
    baseName = project.name + '-all'
    version  = '0.1.0-SNAPSHOT'

    manifest {
        attributes(
            'Main-Class': 'org.apache.beam.examples.MinimalWordCount'
        )
    }
}

spotless {
  scala {
    scalafmt("$scalafmtVersion").configFile('.scalafmt.conf')
  }
}
